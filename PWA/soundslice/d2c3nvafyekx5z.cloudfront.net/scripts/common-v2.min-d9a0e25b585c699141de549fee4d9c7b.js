(function(c,d,w,t,n,h,x,y,p,z,A,B,u,g){function k(b){for(var a=document.getElementsByClassName("modal"),c=a.length;c--;)b&&t(a[c],"jsnoescape")||z(a[c]);w("BLUR_ALL")}function C(b){b.preventDefault();k(!1)}function q(b){b=b.getElementsByClassName("jsclosemodal");for(var a=b.length;a--;)d(b[a],"click",C)}function v(b){var a=g(b.target,"data-modal");a&&(b.preventDefault(),r(a,g(b.target,"data-modal-extra")||"",null))}function r(b,a,d){var e=b+"-modal";if(!a&&c(e))p(e);else{b="/modals/"+b+"/";var f=
c(e);f&&f.parentNode.removeChild(f);a&&(b+="?data="+encodeURIComponent(a));u("GET",b,null,function(a){document.body.insertAdjacentHTML("beforeend",a.modal);q(c(e));p(e);d&&d()},function(){})}}window.soundslice.activateModalOpeners=function(){for(var b=document.getElementsByClassName("jsopenmodal"),a=b.length;a--;)d(b[a],"click",v)};window.soundslice.modalOpenerClick=v;window.soundslice.activateModalClosers=q;window.soundslice.closeActiveModal=k;window.soundslice.loadAjaxModal=r;A(function(){var b=
c("searchwrap"),a=c("searchlink"),l=c("success-message"),e;var f=document.getElementsByClassName("showloginmodal");for(e=f.length;e--;)d(f[e],"click",function(a){a.preventDefault();p("loginmodal");setTimeout(function(){c("loginmodal_email").focus()},100)});a&&b&&d(a,"mousedown touchstart",function(a){a.preventDefault();y(b,"active");c("searchbar").focus()});(a=c("settings-link"))&&B(a,c("user-settings"),"active");(a=c("feedback-modal-button"))&&d(a,"click",function(){r("feedback","",function(){d(c("feedback-form"),
"submit",function(a){a.preventDefault();(a=a.target.feedback.value.trim())&&u("POST","/api/v1/feedback/",{message:a},function(a){c("success-message-txt").innerHTML="Thanks for the feedback!";n(c("success-message"),"active");k(!1)},function(){})})})});(a=c("closesuccessmsg"))&&d(a,"mousedown touchstart",function(a){h(l,"active")});l&&t(l,"active")&&setTimeout(function(){h(l,"active")},4E3);(a=c("mini-search"))&&d(a,"keyup",function(a){x(a.currentTarget,"not-empty",!!a.currentTarget.value)});var m=
c("burgermenu");a=c("burgeron");f=c("burgeroff");var g=function(){h(m,"active");h(document.body,"burgeron")};a&&f&&(d(a,"mousedown",function(){n(m,"active");n(document.body,"burgeron")}),d(f,"mousedown",function(){g()}));m&&d(m,"mousedown",function(a){a.target===a.currentTarget&&g()});q(document);d(window,"keydown",function(a){27===a.which&&k(!0)});"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceworker.js",{scope:"/"})})})(utils.gid,utils.assign,utils.dispatch,utils.hasClass,
utils.addClass,utils.removeClass,utils.addRemoveClass,utils.toggleClass,utils.openModal,utils.closeModal,utils.onready,utils.makeMenu,utils.ajax,utils.getDataAttribute);

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Honeybadger=t()}(this,function(){"use strict";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e=function(){var m,w,j="1.0.2",E={name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:j,language:"javascript"},k=!1,_=!1;function S(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function x(e){return!!m&&m.name===e.name&&m.message===e.message&&m.stack===e.stack}function T(e){return e.stacktrace||e.stack||void 0}return function(e){var o=_,t=[],c=[],s={context:{},beforeNotifyHandlers:[],errorsSent:0};if("object"===O(e))for(var r in e)s[r]=e[r];function u(){var e=window.console;if(e){var t=Array.prototype.slice.call(arguments);t.unshift("[Honeybadger]"),e.log.apply(e,t)}}function f(){if(l("debug"))return u.apply(this,arguments)}function l(e,t){var r=s[e];return void 0===r&&(r=s[e.toLowerCase()]),"false"===r&&(r=!1),void 0!==r?r:t}function p(){return!o&&l("onerror",!0)}function n(e,t){try{var r=new XMLHttpRequest;r.open("POST","http"+(l("ssl",!0)?"s":"")+"://"+l("host","api.honeybadger.io")+"/v1/notices/js",l("async",!0)),r.setRequestHeader("X-API-Key",e),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Accept","text/json, application/json"),r.send(JSON.stringify(function e(t,r){var n,o,i,a;if(i={},r||(r=0),r>=l("max_depth",8))return"[MAX DEPTH REACHED]";for(n in t)o=t[n],Object.prototype.hasOwnProperty.call(t,n)&&null!=n&&null!=o&&((/function|symbol/.test(O(a=o))||"object"===O(a)&&void 0===a.hasOwnProperty)&&(o=Object.prototype.toString.call(o)),i[n]="object"===O(o)?e(o,r+1):o);return i}(t)))}catch(e){u("Unable to send error report: error while initializing request",e,t)}}function d(e){if(m=w=null,l("disabled",!1))return f("Dropping notice: honeybadger.js is disabled",e),!1;var t,r=l("apiKey",l("api_key"));return r?(t=l("maxErrors"))&&s.errorsSent>=t?(f("Dropping notice: max errors exceeded",e),!1):(s.errorsSent++,n(r,e),!0):(u("Unable to send error report: no API key has been configured"),!1)}function y(r,e){if(r||(r={}),"[object Error]"===Object.prototype.toString.call(r)){var t=r;r=S(r,{name:t.name,message:t.message,stack:T(t)})}if("object"!==O(r)){var n=String(r);r={message:n}}if(x(r))return!1;if(w&&k&&d(w),0===function(){var e,t;for(e in t=[],r)Object.prototype.hasOwnProperty.call(r,e)&&t.push(e);return t}().length)return!1;if(e&&(r=S(r,e)),function(e,t){var r=e.message;for(var n in t)if(r.match(t[n]))return!0;return!1}(r,l("ignorePatterns")))return!1;if(function(e,t){var r,n;for(r=0,n=e.length;r<n;r++)if(!1===(0,e[r])(t))return!0;return!1}(s.beforeNotifyHandlers,r))return!1;var o,i=((o={}).HTTP_USER_AGENT=navigator.userAgent,document.referrer.match(/\S/)&&(o.HTTP_REFERER=document.referrer),o);"string"==typeof r.cookies?i.HTTP_COOKIE=r.cookies:"object"===O(r.cookies)&&(i.HTTP_COOKIE=function(e){if("object"===O(e)){var t=[];for(var r in e)t.push(r+"="+e[r]);return t.join(";")}}(r.cookies));var a={notifier:E,error:{class:r.name||"Error",message:r.message,backtrace:r.stack,generator:r.generator,fingerprint:r.fingerprint},request:{url:r.url||document.URL,component:r.component||l("component"),action:r.action||l("action"),context:S(s.context,r.context),cgi_data:i,params:r.params},server:{project_root:r.projectRoot||r.project_root||l("projectRoot",l("project_root",window.location.protocol+"//"+window.location.host)),environment_name:r.environment||l("environment"),revision:r.revision||l("revision")}};return w=a,m=r,k?(f("Deferring notice",r,a),window.setTimeout(function(){x(r)&&d(a)})):(f("Queuing notice",r,a),c.push(a)),r}var i=!0;if(window.atob||(i=!1),window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(i=!1)}catch(e){}function a(t,r){try{return"function"!=typeof t?t:(e=t,"function"!=typeof Object.isExtensible||Object.isExtensible(e)?(t.___hb||(t.___hb=function(){var e=p();if(!(i&&(e||r)||r&&!e))return t.apply(this,arguments);try{return t.apply(this,arguments)}catch(e){throw y(e),e}}),t.___hb.___hb=t.___hb,t.___hb):t)}catch(e){return t}var e}s.notify=function(e,t,r){if(e||(e={}),"[object Error]"===Object.prototype.toString.call(e)){var n=e;e=S(e,{name:n.name,message:n.message,stack:T(n)})}return"object"!==O(e)&&(e={message:String(e)}),t&&"object"!==O(t)&&(t={name:String(t)}),t&&(e=S(e,t)),"object"===O(r)&&(e=S(e,r)),y(e,function(e){var t;if(e&&(t=T(e)))return{stack:t,generator:void 0};try{throw new Error("")}catch(e){if(t=T(e))return{stack:t,generator:"throw"}}t=["<call-stack>"];for(var r=arguments.callee;r&&t.length<10;){/function(?:\s+([\w$]+))+\s*\(/.test(r.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{r=r.caller}catch(e){break}}return{stack:t.join("\n"),generator:"walk"}}(e))},s.wrap=function(e){return a(e,!0)},s.setContext=function(e){return"object"===O(e)&&(s.context=S(s.context,e)),s},s.resetContext=function(e){return"object"===O(e)?s.context=S({},e):s.context={},s},s.configure=function(e){for(var t in e)s[t]=e[t];return s},s.beforeNotify=function(e){return s.beforeNotifyHandlers.push(e),s};var v=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};function g(e,t,r){if(!o&&e&&t&&r){var n=e[t];e[t]=r(n)}}s.reset=function(){for(var e in s.context={},s.beforeNotifyHandlers=[],s)-1==v.call(t,e)&&(s[e]=void 0);return s.resetMaxErrors(),s},s.resetMaxErrors=function(){return s.errorsSent=0},s.getVersion=function(){return j};var h=function(n){return function(e,t){if("function"!=typeof e)return n(e,t);var r=Array.prototype.slice.call(arguments,2);return e=a(e),n(function(){e.apply(null,r)},t)}};for(var r in g(window,"setTimeout",h),g(window,"setInterval",h),"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){var t=window[e]&&window[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(g(t,"addEventListener",function(o){return function(e,t,r,n){try{t&&null!=t.handleEvent&&(t.handleEvent=a(t.handleEvent))}catch(e){u(e)}return o.call(this,e,a(t),r,n)}}),g(t,"removeEventListener",function(o){return function(e,t,r,n){return o.call(this,e,t,r,n),o.call(this,e,a(t),r,n)}}))}),g(window,"onerror",function(i){return function(e,t,r,n,o){return function(e,t,r,n,o){if(f("window.onerror callback invoked",arguments),!m&&p())if(0===r&&/Script error\.?/.test(e))u("Ignoring cross-domain script error: enable CORS to track these types of errors",arguments);else{var i=[e,"\n    at ? (",t||"unknown",":",r||0,":",n||0,")"].join("");if(o){var a={stack:T(o)};return a.stack||(a={stack:i}),y(o,a)}y({name:"window.onerror",message:e,stack:i})}}(e,t,r,n,o),!("function"!=typeof i||!l("_onerror_call_orig",!0))&&i.apply(this,arguments)}}),_=!0,s)t.push(r);if(f("Initializing honeybadger.js "+j),/complete|interactive|loaded/.test(document.readyState))k=!0,f("honeybadger.js 1.0.2 ready");else{f("Installing ready handler");var b=function(){var e;for(k=!0,f("honeybadger.js 1.0.2 ready");e=c.pop();)d(e)};document.addEventListener?document.addEventListener("DOMContentLoaded",b,!0):window.attachEvent("onload",b)}return s}}(),t=e();return t.factory=e,t});
//# sourceMappingURL=honeybadger.min.js.map
